%YAML 1.1
---
Packages:
    id:                 INT, pk
    name:               STRING
    metapackage:        BOOLEAN
    description:        STRING
    wiki:               STRING
    git:                STRING
    branch:             STRING
    path:               STRING

Files:
    id:                 INT, pk
    package_id:         INT, fk(Packages.id)
    name:               STRING
    path:               STRING

Metrics:
    id:                 INT, pk
    name:               STRING
    description:        STRING

File_Metrics:
    file_id:            INT, pk, fk(Files.id)
    metric_id:          INT, pk, fk(Metrics.id)
    value:              FLOAT

Package_Metrics:
    package_id:         INT, pk, fk(Packages.id)
    metric_id:          INT, pk, fk(Metrics.id)
    value:              FLOAT

File_Class_Metrics:
    file_id:            INT, pk, fk(Files.id)
    class_name:         STRING, pk
    line:               INT, pk
    metric_id:          INT, pk, fk(Metrics.id)
    value:              FLOAT

File_Function_Metrics:
    file_id:            INT, pk, fk(Files.id)
    function_name:      STRING, pk
    line:               INT, pk
    metric_id:          INT, pk, fk(Metrics.id)
    value:              FLOAT

Rules:
    id:                 INT, pk
    name:               STRING
    scope:              STRING
    description:        STRING

Tags:
    id:                 INT, pk
    name:               STRING

Rule_Tags:
    rule_id:            INT, pk, fk(Rules.id)
    tag_id:             INT, pk, fk(Tags.id)

Non_Compliance:
    id:                 INT, pk
    rule_id:            INT, fk(Rules.id)
    package_id:         INT, fk(Packages.id)
    file_id:            INT, fk(Files.id)
    line:               INT
    function:           STRING
    comment:            STRING

People:
    id:                 INT, pk
    name:               STRING
    email:              STRING

Licenses:
    id:                 INT, pk
    name:               STRING

Package_Dependency_Types:
    id:                 INT, pk
    dependency_type:    STRING

Package_Dependencies:
    package_id:         INT, pk, fk(Packages.id)
    dependency_id:      INT, pk, fk(Packages.id)
    type_id:            INT, pk, fk(Package_Dependency_Types.id)

Package_Licenses:
    package_id:         INT, pk, fk(Packages.id)
    licence_id:         INT, pk, fk(Licenses.id)

Package_Authors:
    package_id:         INT, pk, fk(Packages.id)
    person_id:          INT, pk, fk(People.id)

Package_Maintainers:
    package_id:         INT, pk, fk(Packages.id)
    person_id:          INT, pk, fk(People.id)

Repositories:
    id:                 INT, pk
    name:               STRING
    owner_type:         STRING
    created_at:         STRING
    updated_at:         STRING
    pushed_at:          STRING
    size:               INT
    forks_count:        INT
    watchers_count:     INT
    subscribers_count:  INT

Repository_Packages:
    package_id:         INT, pk, fk(Packages.id)
    repository_id:      INT, pk, fk(Repositories.id)

Issues:
    id:                 INT, pk
    created_by:         STRING
    assigned_to:        STRING
    created_at:         STRING
    closed_at:          STRING
    repository_id:      INT, fk(Repositories.id)

Labels:
    id:                 INT, pk
    name:               STRING

Issue_Labels:
    issue_id:           INT, pk, fk(Issues.id)
    label_id:           INT, pk, fk(Labels.id)

Git_Users:
    id:                 INT, pk
    username:           STRING
    email:              STRING

Git_People:
    id:                 INT, pk
    git_id:             INT, fk(Git_Users.id)
    person_id:          INT, fk(People.id)
